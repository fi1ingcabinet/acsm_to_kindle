<!DOCTYPE html>
<html>
<head>
    <title>ascm user key display content</title>
    <script src="user_key2.js"></script>

</head>
<body>

    <h1>Upload a key file and display the elements:</h1>   
    
    <input type="file" name="inputfile" id="inputfile">
    
    <pre id="output"></pre> 
    <p id="file_upload" style="display:none">File Uploaded successfully &#9989;</p>
     <button id="submit_file">Click me</button> 
      
    <script type="text/javascript"> 
        var mySubString = "";
        document.getElementById('inputfile').addEventListener('change', function() { 
            file = this.files[0];
            var fr=new FileReader(); 
            document.getElementById('submit_file').addEventListener('click', function() {
                fr.onload=function(){ 
                    //console.log(fr.result);
                    mySubString = fr.result.substring(
                        fr.result.lastIndexOf("<adept:privateLicenseKey>") + 25, 
                        fr.result.lastIndexOf("</adept:privateLicenseKey>")
                    );
                    document.getElementById('output').textContent=mySubString; 
                    //mySubString = console.log(mySubString);
                    return mySubString;
                }

                mySubString = fr.readAsText(file);

                document.getElementById("file_upload").style.display = "block";
            });
            
        }) 
    </script>
    
    <button onclick="test_function()">Test button</button>
    



</body>
</html>